# 语义 SLAM 功能需求草案

## 1. 系统级目标
- 在低能见度、狭窄地下空间（含粉尘干扰）环境中实现稳定的多模态语义 SLAM。
- 支持离线评估和未来的实时运行模式，输出可用于导航/巡检的语义增强地图。

## 2. 功能需求
1. **传感器输入**
   - 图像：双目或单目，需支持曝光变化、低光环境。
   - 点云：激光雷达或深度雷达，要求可处理稀疏/受粉尘影响的数据。
   - IMU：六轴惯导，用于短期运动约束与补偿。
   - 数据格式：支持 KITTI（PNG + BIN + poses）、DARPA 与自采 .bag（需解析脚本）。

2. **核心模块**
   - 特征提取：视觉、点云、IMU 各自编码器，输出统一维度特征。
   - 融合策略：三模态特征级融合，可扩展到语义信息。
   - 语义推理：集成图像或点云语义分割，输出类别标签。
   - 位姿估计：结合多模态特征与语义约束，生成相对位姿轨迹。
   - 地图构建：生成语义点云或语义栅格地图，支持回环与更新。

3. **运行模式**
   - 离线批处理：读取数据集/日志文件，输出轨迹与地图。
   - 实时推理预留：具备实时数据接口、缓存和异步处理框架，可后续接入 ROS2。

4. **输出结果**
   - 轨迹：KITTI 格式的位姿文件（可与 GT 比对）。
   - 语义地图：点云/栅格形式的语义标注数据。
   - 评估报告：误差指标、语义指标、性能指标。

5. **可扩展性与维护**
   - 模块化设计（编码器、融合、语义、地图独立），便于替换或扩展。
   - 文档和配置清晰，支持快速迁移到新数据集。

## 3. 性能目标
- 相对现有 VO/VIO：ATE、RPE 有明显下降，尤其是在低能见度场景。
- 语义指标：语义 IoU ≥ 60%（参考 KITTI/SemanticKITTI 标准），语义漂移小于 5%。
- 实时目标：初期离线评估为主，实时模式的设计需具备 10Hz 以上潜力。

## 4. 风险与假设
- 无语义真值：需利用自监督或开源语义模型生成伪标签。
- 点云质量差：需考虑滤波、稀疏重建或多帧融合。
- .bag 解析复杂：需提前规划 topic 对齐与时间同步方案。
- GPU 资源有限（单卡 RTX 4060）：模型规模需控制，必要时采用轻量结构。

## 5. 下一步
- 梳理可复用与待修改模块。
- 制定点云/语义模型调研清单与对比表。
- 建立数据解析流程设计文档。
