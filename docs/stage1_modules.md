# 模块复用与改动边界

| 模块                        | 路径/文件                               | 当前功能                                 | 复用策略               | 预期改动                     | 风险/备注 |
|-----------------------------|------------------------------------------|------------------------------------------|------------------------|------------------------------|-----------|
| 数据加载（图像+IMU）        | datasets/kitti_dataset.py, mono_dataset.py | 读取 KITTI 图像与 IMU                    | ✅ 保留                | 扩展返回点云、bag 支持        | 需保证 API 兼容 |
| 预处理脚本                  | data/data_prep.sh                        | 下载并整理 KITTI 数据                    | ✅ 保留并扩展          | 加入点云下载、bag 转换        | 需跨平台适配 |
| 视觉编码器                  | networks/depth_encoder.py                | 提取视觉特征                              | ✅ 复用                | 如需语义信息，增加语义头      | 性能与精度平衡 |
| Pose 编码/解码              | networks/pose_encoder.py, pose_decoder.py | 提取融合特征并输出位姿                   | ✅ 复用                | 支持新融合向量维度            | 需重新加载权重 |
| IMU 编码器                  | networks/imu_encoder.py                  | IMU 特征提取                              | ✅ 复用                | 适配融合模块接口              | 权重兼容性 |
| 融合模块                    | networks/fusion_module.py                | 视觉+IMU 融合                             | ⚠️ 需改造             | 接入点云特征、语义信息        | 模块复杂度上升 |
| 点云处理（缺失）            | -                                        | -                                        | ❌ 新增                | 点云编码器、预处理模块        | 算力负担 |
| 语义模块（缺失）            | -                                        | -                                        | ❌ 新增                | 语义分割与语义地图            | 需模型调研 |
| 推理脚本                    | evaluations/evaluate_pose_vo.py/ vio.py  | 运行 VO/VIO 推理与评估                   | ⚠️ 需改造             | 接入三模态前向、语义输出      | 保持向后兼容 |
| 评估脚本                    | evaluations/eval_odom.py, kitti_odometry.py | KITTI 误差计算                          | ✅ 复用                | 若无 GT，需输出自评指标        | 无 GT 时需替代 |
| 数据转换工具（缺失）        | -                                        | -                                        | ❌ 新增                | bag 解析脚本、同步工具        | 需适配多数据源 |
| 文档与配置                  | README.md, PLAN.md, docs/                | 项目说明、计划                            | ✅ 保留并扩充          | 补充语义/多模态说明           | 持续维护 |
